<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cit's Terminal - Landing Page</title>
    <style>
        /* CSS Custom Properties per theming sistemico */
        :root {
            --matrix-green: #00ff41;
            --matrix-green-dim: #00cc33;
            --terminal-bg: rgba(0, 0, 0, 0.85);
            --frame-color: #666;
            --font-family: 'Courier New', 'Lucida Console', monospace;
            --cursor-blink: 1s;
        }

        /* Reset e base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background: linear-gradient(135deg, #0d1117 0%, #1a1a1a 100%);
            height: 100vh;
            margin: 0;
            padding: 0;
            overflow: hidden;
            position: relative;
        }

        /* Matrix rain background effect */
        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.1;
        }

        /* Terminal container fullscreen */
        .terminal-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            background: var(--terminal-bg);
            backdrop-filter: blur(2px);
            border: none;
            border-radius: 0;
            box-shadow:
                inset 0 0 100px rgba(0, 255, 65, 0.1),
                inset 0 0 50px rgba(0, 0, 0, 0.3);
        }

        /* Terminal header bar */
        .terminal-header {
            background: linear-gradient(to bottom, #333, #111);
            padding: 12px 20px;
            border-bottom: 1px solid var(--frame-color);
            display: flex;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .terminal-buttons {
            display: flex;
            gap: 6px;
        }

        .terminal-button {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
        }

        .close {
            background: #ff5f56;
        }

        .minimize {
            background: #ffbd2e;
        }

        .maximize {
            background: #27ca3f;
        }

        .terminal-title {
            color: #ccc;
            font-size: 12px;
            margin-left: auto;
            margin-right: auto;
            font-weight: normal;
        }

        /* Terminal content area - fullscreen */
        .terminal-content {
            flex: 1;
            padding: 30px;
            color: var(--matrix-green);
            font-size: 16px;
            line-height: 1.6;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--matrix-green) transparent;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        /* Terminal prompt styling */
        .terminal-line {
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }

        .prompt {
            color: var(--matrix-green-dim);
            margin-right: 8px;
        }

        .command {
            color: var(--matrix-green);
        }

        /* Cursore lampeggiante */
        .cursor {
            display: inline-block;
            width: 8px;
            height: 16px;
            background: var(--matrix-green);
            animation: blink var(--cursor-blink) infinite;
            margin-left: 2px;
        }

        @keyframes blink {

            0%,
            50% {
                opacity: 1;
            }

            51%,
            100% {
                opacity: 0;
            }
        }

        /* Output text styling */
        .output-text {
            color: var(--matrix-green);
            font-weight: normal;
        }

        .user-input {
            color: var(--matrix-green);
        }

        /* Stile per testo selezionato - migliora la visibilit√† per copy/paste */
        ::selection {
            background: var(--matrix-green);
            color: #000;
        }

        ::-moz-selection {
            background: var(--matrix-green);
            color: #000;
        }

        /* Enable text selection on mobile */
        .terminal-content {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }

        /* Touch action optimization */
        .terminal-content * {
            touch-action: manipulation;
        }

        .help-command {
            color: var(--matrix-green-dim);
            margin: 5px 0;
            padding-left: 20px;
        }

        .help-description {
            color: #888;
            margin-left: 10px;
        }

        .help-header {
            color: var(--matrix-green);
            font-weight: bold;
            margin: 10px 0 5px 0;
        }

        /* Stili per link cliccabili con CTRL+Click */
        .clickable-link {
            color: var(--matrix-green);
            text-decoration: underline;
            cursor: pointer;
            transition: color 0.2s ease;
            -webkit-tap-highlight-color: rgba(0, 255, 65, 0.3);
            user-select: text;
            -webkit-user-select: text;
        }

        .clickable-link:hover {
            color: var(--matrix-green-dim);
            text-shadow: 0 0 5px var(--matrix-green);
        }

        /* Mobile: link touch feedback */
        @media (max-width: 768px) {
            .clickable-link {
                padding: 2px 4px;
                margin: -2px -4px;
                display: inline-block;
            }

            .clickable-link:active {
                background: rgba(0, 255, 65, 0.2);
                color: var(--matrix-green-dim);
            }
        }

        /* Typewriter effect per testo */
        .typewriter-char {
            opacity: 0;
            animation: fadeInChar 0.05s ease-in-out forwards;
        }

        @keyframes fadeInChar {
            to {
                opacity: 1;
            }
        }

        /* Glitch effect per comando speciali */
        .glitch {
            position: relative;
            animation: glitch 0.3s ease-in-out;
        }

        @keyframes glitch {
            0% {
                transform: translate(0);
            }

            20% {
                transform: translate(-2px, 2px);
            }

            40% {
                transform: translate(-2px, -2px);
            }

            60% {
                transform: translate(2px, 2px);
            }

            80% {
                transform: translate(2px, -2px);
            }

            100% {
                transform: translate(0);
            }
        }

        /* Smooth scroll per contenuto lungo */
        .terminal-content::-webkit-scrollbar {
            width: 12px;
        }

        .terminal-content::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }

        .terminal-content::-webkit-scrollbar-thumb {
            background: var(--matrix-green);
            border-radius: 6px;
            border: 2px solid rgba(0, 0, 0, 0.3);
        }

        .terminal-content::-webkit-scrollbar-thumb:hover {
            background: var(--matrix-green-dim);
        }

        /* Responsive design fullscreen */
        @media (max-width: 768px) {
            .terminal-content {
                padding: 20px 15px;
                font-size: 14px;
                line-height: 1.5;
            }

            .terminal-header {
                padding: 10px 15px;
            }

            .terminal-title {
                font-size: 11px;
            }
        }

        @media (max-width: 480px) {
            .terminal-content {
                padding: 15px 10px;
                font-size: 13px;
            }

            .terminal-header {
                padding: 8px 10px;
            }
        }

        /* Large screens optimization */
        @media (min-width: 1920px) {
            .terminal-content {
                font-size: 18px;
                padding: 40px;
            }
        }

        /* Safe area support for mobile */
        @supports (padding: max(0px)) {
            .terminal-content {
                padding-left: max(30px, env(safe-area-inset-left));
                padding-right: max(30px, env(safe-area-inset-right));
                padding-bottom: max(30px, env(safe-area-inset-bottom));
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            :root {
                --matrix-green: #ffffff;
                --matrix-green-dim: #cccccc;
                --terminal-bg: rgba(0, 0, 0, 0.95);
            }

            .terminal-container::before,
            .terminal-container::after {
                display: none;
            }
        }

        /* Accessibility: Reduced motion support */
        @media (prefers-reduced-motion: reduce) {

            .cursor,
            .typewriter-char {
                animation: none;
            }

            .cursor {
                opacity: 1;
            }

            .terminal-container::before {
                display: none;
            }
        }

        /* Hidden input for mobile keyboard support */
        .mobile-input {
            position: absolute;
            left: -9999px;
            opacity: 0;
            pointer-events: none;
        }

        /* Mobile: show input when terminal is focused */
        @media (max-width: 768px) {
            .mobile-input {
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
                padding: 10px;
                background: rgba(0, 0, 0, 0.9);
                border: 1px solid var(--matrix-green);
                color: var(--matrix-green);
                font-family: var(--font-family);
                font-size: 16px;
                opacity: 1;
                pointer-events: all;
                z-index: 2000;
                box-sizing: border-box;
            }

            .mobile-input:focus {
                outline: 2px solid var(--matrix-green);
            }

            /* Adjust terminal content padding on mobile to avoid keyboard overlap */
            .terminal-content {
                padding-bottom: 80px;
            }
        }

        /* Matrix scanlines effect per fullscreen */
        .terminal-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(transparent 50%,
                    rgba(0, 255, 65, 0.03) 50%);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 1000;
        }

        /* Subtle grid overlay */
        .terminal-container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.02;
            background-image:
                linear-gradient(rgba(0, 255, 65, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 65, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            pointer-events: none;
            z-index: 999;
        }
    </style>
</head>

<body>
    <!-- Matrix background effect placeholder -->
    <div class="matrix-bg" id="matrixBg"></div>

    <!-- Main terminal container -->
    <div class="terminal-container" role="main" aria-label="Terminal simulato in stile Matrix">
        <!-- Terminal header with classic window controls -->
        <div class="terminal-header">
            <div class="terminal-buttons">
                <button class="terminal-button close" aria-label="Chiudi" tabindex="-1"></button>
                <button class="terminal-button minimize" aria-label="Minimizza" tabindex="-1"></button>
                <button class="terminal-button maximize" aria-label="Massimizza" tabindex="-1"></button>
            </div>
            <div class="terminal-title">cittadino@ntonio:~$</div>
        </div>

        <!-- Terminal content area -->
        <div class="terminal-content" id="terminalContent">
            <div class="terminal-line">
                <span class="prompt">cittadino@ntonio:~$</span>
                <span class="command">echo "Hello World"</span>
            </div>
            <div class="terminal-line">
                <span class="command">Hello World</span>
            </div>
            <div class="terminal-line">
                <span class="output-text" id="welcomeMessage"></span>
            </div>
            <div class="terminal-line" id="currentLine">
                <span class="prompt">cittadino@ntonio:~$</span>
                <span class="user-input" id="userInput"></span>
                <span class="cursor" id="cursor"></span>
            </div>
        </div>
        
        <!-- Hidden input for mobile keyboard support -->
        <input type="text" 
               id="mobileInput" 
               class="mobile-input" 
               autocomplete="off" 
               autocorrect="off" 
               autocapitalize="off" 
               spellcheck="false"
               placeholder="Digita un comando...">
    </div>

    <script>
        // Command System - Clean Architecture Pattern
        class TerminalCommandSystem {
            constructor() {
                this.commands = new Map();
                this.isTyping = false;
                this.currentInput = '';
                this.isWaitingForInput = true;
                this.commandHistory = []; // History dei comandi eseguiti
                this.historyIndex = -1; // Indice corrente nella history
                
                // Interactive mode state
                this.interactiveMode = null; // 'social', 'email', etc.
                this.interactiveData = {}; // Dati temporanei per modalit√† interattive
                this.interactiveStep = 0; // Step corrente nella modalit√† interattiva
                
                this.initializeCommands();
                this.bindEvents();
            }

            // Command Registration - Open/Closed Principle
            initializeCommands() {
                this.commands.set('cit', {
                    description: 'Comando principale per navigare il CV',
                    execute: (args) => this.handleCitCommand(args)
                });

                this.commands.set('help', {
                    description: 'Mostra i comandi disponibili',
                    execute: () => this.showHelp()
                });

                this.commands.set('about', {
                    description: 'Mostra informazioni personali e summary',
                    execute: () => this.showAbout()
                });

                this.commands.set('clear', {
                    description: 'Pulisce il terminale',
                    execute: () => this.clearTerminal()
                });

                this.commands.set('social', {
                    description: 'Apri i profili social in modo interattivo',
                    execute: () => this.startSocialMode()
                });

                this.commands.set('sendmail', {
                    description: 'Invia un messaggio via email',
                    execute: () => this.startEmailMode()
                });
            }

            // CV Navigation Commands Structure
            getCvCommands() {
                return {
                    'cit --help': 'Mostra tutti i comandi disponibili',
                    'cit --about': 'Informazioni personali e summary',
                    'cit --skills': 'Competenze tecniche e soft skills',
                    'cit --experience': 'Esperienza lavorativa e progetti',
                    'cit --education': 'Formazione e certificazioni',
                    'cit --projects': 'Portfolio progetti principali',
                    'cit --contact': 'Informazioni di contatto',
                    'cit --download': 'Scarica CV in formato PDF'
                };
            }

            // Typewriter Effect Implementation
            async typeText(text, element, speed = 50) {
                this.isTyping = true;
                element.textContent = '';

                for (let i = 0; i < text.length; i++) {
                    if (!this.isTyping) break; // Allow interruption

                    const char = document.createElement('span');
                    char.textContent = text[i];
                    char.className = 'typewriter-char';
                    char.style.animationDelay = `${i * speed}ms`;
                    element.appendChild(char);

                    await new Promise(resolve => setTimeout(resolve, speed));
                }

                this.isTyping = false;
            }

            // Welcome Message with Typewriter
            async showWelcomeMessage() {
                const welcomeElement = document.getElementById('welcomeMessage');
                const message = 'Per saperne di pi√π esegui il comando "cit --help"';

                await new Promise(resolve => setTimeout(resolve, 1000)); // Pausa dopo Hello World
                await this.typeText(message, welcomeElement, 60);

                // Enable input after welcome message
                this.enableInput();
            }

            // Help Command Implementation
            handleCitCommand(args) {
                console.log('üîç DEBUG handleCitCommand - Args ricevuti:', args);
                
                if (args.includes('--help')) {
                    this.showCvHelp();
                } else if (args.length === 0) {
                    this.addOutputLine('Usa "cit --help" per vedere i comandi disponibili');
                } else {
                    // Gestione dei sottocomandi di cit
                    // Rimuovi il -- se presente per normalizzare il comando
                    let subcommand = args[0];
                    if (subcommand.startsWith('--')) {
                        subcommand = subcommand.substring(2);
                    }
                    
                    console.log('üîç DEBUG handleCitCommand - Subcommand normalizzato:', subcommand);
                    
                    switch(subcommand) {
                        case 'about':
                            console.log('‚úÖ Eseguendo showAbout()');
                            this.showAbout();
                            break;
                        case 'skills':
                            console.log('‚úÖ Eseguendo showSkills()');
                            this.showSkills();
                            break;
                        case 'experience':
                            console.log('‚úÖ Eseguendo showExperience()');
                            this.showExperience();
                            break;
                        case 'education':
                            console.log('‚úÖ Eseguendo showEducation()');
                            this.showEducation();
                            break;
                        case 'contact':
                            console.log('‚úÖ Eseguendo showContact()');
                            this.showContact();
                            break;
                        case 'projects':
                            console.log('‚úÖ Eseguendo showProjects()');
                            this.showProjects();
                            break;
                        case 'download':
                            console.log('‚úÖ Eseguendo downloadCV()');
                            this.downloadCV();
                            break;
                        default:
                            console.log('‚ùå Subcommand non riconosciuto:', subcommand);
                            this.addOutputLine(`Comando non riconosciuto: cit ${args.join(' ')}`);
                            this.addOutputLine('Usa "cit --help" per l\'elenco completo');
                    }
                }
            }

            // CV Commands Help Display
            showCvHelp() {
                this.addOutputLine('', 'help-header', 'COMANDO CIT - CURRICULUM VITAE NAVIGATION');
                this.addOutputLine('');
                this.addOutputLine('Comandi disponibili:', 'help-header');

                const commands = this.getCvCommands();
                Object.entries(commands).forEach(([command, description]) => {
                    this.addCommandHelp(command, description);
                });

                this.addOutputLine('');
                this.addOutputLine('Suggerimento: Inizia con "cit --about" per una panoramica generale', 'help-description');
            }

            // About Command Implementation
            showAbout() {
                this.addOutputLine('', 'help-header', 'üë§ PROFILO PROFESSIONALE');
                this.addOutputLine('');
                this.addOutputLine('Nome: Antonio Cittadino', 'output-text');
                this.addOutputLine('üìß Email: awesome.cit.dev@gmail.com', 'output-text');
                this.addOutputLine('üìû Telefono: 3804611277', 'output-text');
                this.addOutputLine('üìç Posizione: Reggio Emilia, Italia', 'output-text');
                this.addOutputLineWithLink('üîó GitHub: github.com/awesomecit', 'github.com/awesomecit', 'output-text');
                this.addOutputLineWithLink('üîó LinkedIn: linkedin.com/in/antonio-cittadino-9362b179', 'linkedin.com/in/antonio-cittadino-9362b179', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('üìù Riassunto:', 'help-header');
                this.addOutputLine('Sviluppatore web principalmente backend, attivo dal 2018 con background in ingegneria', 'output-text');
                this.addOutputLine('elettronica. Forte passione per automazione, analisi dei segnali e multimedia, con', 'output-text');
                this.addOutputLine('particolare interesse per Internet e intelligenza artificiale. Esperienza in ambienti', 'output-text');
                this.addOutputLine('mission-critical: HealthCare, Finance e Industry 4.0.', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('üí° Soft Skills:', 'help-header');
                this.addOutputLine('‚Ä¢ Flessibilit√† e adattamento rapido alle priorit√†', 'output-text');
                this.addOutputLine('‚Ä¢ Scomposizione di task complessi per rispettare scadenze', 'output-text');
                this.addOutputLine('‚Ä¢ Lavoro di squadra con mentoring e code review', 'output-text');
                this.addOutputLine('‚Ä¢ Esperienza consolidata in ambienti Agile (Scrum, Kanban, XP)', 'output-text');
                this.addOutputLine('');
                const isMobile = window.innerWidth <= 768;
                const linkHint = isMobile 
                    ? 'üí° Suggerimento: Tap sui link per aprirli' 
                    : 'üí° Suggerimento: CTRL+Click sui link per aprirli';
                this.addOutputLine(linkHint, 'help-description');
            }

            // Skills Command Implementation
            showSkills() {
                this.addOutputLine('', 'help-header', '‚öôÔ∏è COMPETENZE TECNICHE');
                this.addOutputLine('');
                this.addOutputLine('üíª Linguaggi di Programmazione:', 'help-header');
                this.addOutputLine('‚Ä¢ Node.js (Intermedio)', 'output-text');
                this.addOutputLine('‚Ä¢ JavaScript & TypeScript (Intermedio)', 'output-text');
                this.addOutputLine('‚Ä¢ PHP (Base, con conoscenza di PSD e best practices)', 'output-text');
                this.addOutputLine('‚Ä¢ Bash (Base)', 'output-text');
                this.addOutputLine('‚Ä¢ Java (Fondamenti e OOP)', 'output-text');
                this.addOutputLine('‚Ä¢ Assembly, VHDL, LabVIEW, MATLAB, SPICE', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('üöÄ Framework e Librerie:', 'help-header');
                this.addOutputLine('‚Ä¢ Express, Fastify, NestJS', 'output-text');
                this.addOutputLine('‚Ä¢ Platformatic (Watt)', 'output-text');
                this.addOutputLine('‚Ä¢ Lit-element', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('üóÑÔ∏è Database:', 'help-header');
                this.addOutputLine('‚Ä¢ PostgreSQL, MySQL, MariaDB, Oracle', 'output-text');
                this.addOutputLine('‚Ä¢ Redis, Elasticsearch', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('üîß DevOps & Testing:', 'help-header');
                this.addOutputLine('‚Ä¢ Docker, Jenkins, GitHub Actions', 'output-text');
                this.addOutputLine('‚Ä¢ CI/CD, TDD, Testing automatico', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('üìê Principi e Metodologie:', 'help-header');
                this.addOutputLine('‚Ä¢ Clean Code, SOLID, Design Patterns', 'output-text');
                this.addOutputLine('‚Ä¢ Agile (Scrum, Kanban), XP', 'output-text');
                this.addOutputLine('‚Ä¢ Pair Programming, Mentoring, DDD', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('üõ†Ô∏è Strumenti:', 'help-header');
                this.addOutputLine('‚Ä¢ Git, GitHub, Ansible, IDE vari', 'output-text');
            }

            // Experience Command Implementation
            showExperience() {
                this.addOutputLine('', 'help-header', 'üíº ESPERIENZA LAVORATIVA');
                this.addOutputLine('');
                this.addOutputLine('üè¢ Promedital (ICT-Group) - Sviluppatore Backend', 'help-header');
                this.addOutputLine('üìç Reggio Emilia, Italia | ‚è∞ In corso', 'output-text');
                this.addOutputLine('‚Ä¢ Migrazione prodotto da Scala a NestJS con rilasci incrementali', 'output-text');
                this.addOutputLine('‚Ä¢ Software per sale operatorie: firma digitale e gestione cartelle cliniche', 'output-text');
                this.addOutputLine('‚Ä¢ Acquisizione immagini da dispositivi DICOM e standard HL7', 'output-text');
                this.addOutputLine('‚Ä¢ Integrazione sistemi terzi tramite HL7 (SOAP, REST, MLLP)', 'output-text');
                this.addOutputLine('‚Ä¢ Referente progetto: collaborazione con CTO, consulenti e team sales', 'output-text');
                this.addOutputLine('‚Ä¢ Gestione team frontend e attivit√† DevOps', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('üöÄ Competitoor - Tech Lead & Backend Developer', 'help-header');
                this.addOutputLine('üìç Remoto/Ibrido | ‚è∞ 3 anni e mezzo', 'output-text');
                this.addOutputLine('‚Ä¢ Gestione team multiculturale: onboarding, task assignment, code review', 'output-text');
                this.addOutputLine('‚Ä¢ R&D nuova dashboard con Elasticsearch e Redis', 'output-text');
                this.addOutputLine('‚Ä¢ Introduzione processi sviluppo e rilascio strutturati', 'output-text');
                this.addOutputLine('‚Ä¢ Gestione operativit√† sistemistica e server', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('‚ö° Horsa Spa / Siemens - Sviluppatore Backend', 'help-header');
                this.addOutputLine('üìç Milano, Italia | ‚è∞ 1 anno', 'output-text');
                this.addOutputLine('‚Ä¢ Formazione MERN stack e sviluppo agile in team', 'output-text');
                this.addOutputLine('‚Ä¢ Integrazione funzionalit√† sistema monitoraggio microgrid (DEOP)', 'output-text');
                this.addOutputLine('‚Ä¢ Sviluppo proxy per Siemens Mindsphere su Cloud Foundry', 'output-text');
                this.addOutputLine('‚Ä¢ Implementazione funzionalit√† login dedicate', 'output-text');
            }

            // Education Command Implementation
            showEducation() {
                this.addOutputLine('', 'help-header', 'üéì FORMAZIONE E CERTIFICAZIONI');
                this.addOutputLine('');
                this.addOutputLine('üìö Laurea Triennale in Ingegneria Elettronica', 'help-header');
                this.addOutputLine('üèõÔ∏è Universit√† della Calabria | üìÖ 2008-2012', 'output-text');
                this.addOutputLine('üéØ Voto: 100/100', 'output-text');
                this.addOutputLine('üìå Indirizzo: Microelettronica', 'output-text');
                this.addOutputLine('‚Ä¢ Solide basi in matematica, fisica e programmazione', 'output-text');
                this.addOutputLine('‚Ä¢ Circuiti elettronici, sistemi digitali', 'output-text');
                this.addOutputLine('‚Ä¢ Linguaggi: Assembly, VHDL, C/C++, MATLAB, LabVIEW', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('‚ö° Diploma di Perito Capotecnico', 'help-header');
                this.addOutputLine('üèõÔ∏è ITIS G. Gronchi, Lamezia Terme | üìÖ 2007-2008', 'output-text');
                this.addOutputLine('üéØ Voto: 100/100 (media pi√π alta dell\'istituto)', 'output-text');
                this.addOutputLine('üìå Specializzazione: Elettronica e Telecomunicazioni', 'output-text');
                this.addOutputLine('üèÜ Stage formativo presso FIAT', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('üìú Certificazioni & Riconoscimenti:', 'help-header');
                this.addOutputLine('‚Ä¢ Certificazione PET (Inglese B1)', 'output-text');
                this.addOutputLine('‚Ä¢ Formazione sulla sicurezza sul lavoro', 'output-text');
                this.addOutputLine('‚Ä¢ Prove fisiche e selettive Accademia Navale (concorso ufficiali)', 'output-text');
                this.addOutputLine('‚Ä¢ Volontariato: AIFO e Servizio Civile', 'output-text');
            }

            // Projects Command Implementation
            showProjects() {
                this.addOutputLine('', 'help-header', 'üöÄ PROGETTI PERSONALI');
                this.addOutputLine('');
                this.addOutputLine('üí° Software Developer Crash Course', 'help-header');
                this.addOutputLine('üìù Descrizione:', 'output-text');
                this.addOutputLine('Corso interattivo per sviluppatori junior per comprendere dinamiche aziendali,', 'output-text');
                this.addOutputLine('metodologie agile e XP, TDD, DDD e CI/CD. Guida attraverso tutte le fasi di', 'output-text');
                this.addOutputLine('sviluppo di un prodotto enterprise con uso consapevole di strumenti AI.', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('üõ†Ô∏è Stack Tecnologico:', 'output-text');
                this.addOutputLine('‚Ä¢ Backend: Node.js, Platformatic (Watt), NestJS', 'output-text');
                this.addOutputLine('‚Ä¢ Database: PostgreSQL, Elasticsearch, Redis', 'output-text');
                this.addOutputLine('‚Ä¢ Message Broker: RabbitMQ', 'output-text');
                this.addOutputLine('‚Ä¢ Frontend: React + Expo', 'output-text');
                this.addOutputLine('‚Ä¢ DevOps: Ansible, Bash, Docker', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('üéØ Obiettivi del Progetto:', 'output-text');
                this.addOutputLine('‚Ä¢ Formazione pratica su metodologie enterprise', 'output-text');
                this.addOutputLine('‚Ä¢ Apprendimento TDD, DDD e CI/CD', 'output-text');
                this.addOutputLine('‚Ä¢ Uso consapevole di AI nel development', 'output-text');
                this.addOutputLine('‚Ä¢ Simulazione ambiente di lavoro reale', 'output-text');
            }

            // Contact Command Implementation
            showContact() {
                this.addOutputLine('', 'help-header', 'üìû INFORMAZIONI DI CONTATTO');
                this.addOutputLine('');
                this.addOutputLine('üë§ Nome: Antonio Cittadino', 'output-text');
                this.addOutputLineWithEmailLink('üìß Email: awesome.cit.dev@gmail.com', 'awesome.cit.dev@gmail.com', 'output-text');
                this.addOutputLine('üì± Telefono: 3804611277', 'output-text');
                this.addOutputLine('üìç Localit√†: Reggio Emilia, Italia', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('üåê Link Social & Professionali:', 'help-header');
                this.addOutputLineWithLink('‚Ä¢ GitHub: https://github.com/awesomecit', 'https://github.com/awesomecit', 'output-text');
                this.addOutputLineWithLink('‚Ä¢ LinkedIn: https://linkedin.com/in/antonio-cittadino-9362b179', 'https://linkedin.com/in/antonio-cittadino-9362b179', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('üíº Disponibilit√†:', 'help-header');
                this.addOutputLine('‚Ä¢ Freelance e consulenze', 'output-text');
                this.addOutputLine('‚Ä¢ Collaborazioni su progetti enterprise', 'output-text');
                this.addOutputLine('‚Ä¢ Mentoring e formazione team', 'output-text');
                this.addOutputLine('');
                const isMobile = window.innerWidth <= 768;
                const contactHint = isMobile 
                    ? 'üí° Suggerimento: Tap sui link per aprirli, tap su email per scrivere' 
                    : 'üí° Suggerimento: CTRL+Click sui link per aprirli, click su email per scrivere';
                this.addOutputLine(contactHint, 'help-description');
                this.addOutputLineWithEmailLink('üìÑ Per referenze o approfondimenti, contattami via email.', 'email', 'output-text');
            }

            // Download CV Command Implementation
            downloadCV() {
                this.addOutputLine('', 'help-header', 'üì• DOWNLOAD CURRICULUM VITAE');
                this.addOutputLine('');
                this.addOutputLine('üîÑ Preparazione download del CV in formato PDF...', 'output-text');
                this.addOutputLine('');
                
                // Verifica se esiste il file CV
                const cvPath = './cv.pdf';
                
                // Simula un piccolo delay per l'effetto di caricamento
                setTimeout(() => {
                    this.addOutputLine('‚úÖ Download avviato!', 'output-text');
                    this.addOutputLine('');
                    this.addOutputLine('üìÑ File: Antonio_Cittadino_CV.pdf', 'output-text');
                    this.addOutputLine('üìä Formato: PDF', 'output-text');
                    this.addOutputLine('');
                    
                    // Crea un link temporaneo e triggera il download
                    const link = document.createElement('a');
                    link.href = cvPath;
                    link.download = 'Antonio_Cittadino_CV.pdf';
                    link.style.display = 'none';
                    // Attributi per compatibilit√† mobile
                    link.setAttribute('target', '_blank');
                    link.setAttribute('rel', 'noopener noreferrer');
                    document.body.appendChild(link);
                    
                    // Trigger del download - compatibile mobile e desktop
                    try {
                        link.click();
                        console.log('üì• Download triggered');
                    } catch (error) {
                        console.error('‚ùå Download error:', error);
                        // Fallback per alcuni browser mobile
                        window.open(cvPath, '_blank');
                    }
                    
                    // Cleanup
                    setTimeout(() => {
                        if (document.body.contains(link)) {
                            document.body.removeChild(link);
                        }
                    }, 100);
                    
                    this.addOutputLine('üí° Se il download non parte automaticamente, controlla che il file cv.pdf', 'output-text');
                    this.addOutputLine('   sia presente nella cartella del progetto.', 'output-text');
                }, 800);
            }

            // Social Mode - Interactive social profile selector
            startSocialMode() {
                this.addOutputLine('', 'help-header', 'üåê PROFILI SOCIAL');
                this.addOutputLine('');
                this.addOutputLine('Seleziona un profilo da aprire:', 'output-text');
                this.addOutputLine('');
                this.addOutputLine('1. GitHub (github.com/awesomecit)', 'help-command');
                this.addOutputLine('2. LinkedIn (linkedin.com/in/antonio-cittadino-9362b179)', 'help-command');
                this.addOutputLine('3. Email (awesome.cit.dev@gmail.com)', 'help-command');
                this.addOutputLine('');
                this.addOutputLine('Digita il numero (1-3) o "cancel" per annullare:', 'output-text');
                
                // Attiva modalit√† interattiva
                this.interactiveMode = 'social';
                this.interactiveStep = 0;
            }

            handleSocialModeInput(input) {
                const choice = input.trim();
                
                if (choice.toLowerCase() === 'cancel') {
                    this.addOutputLine('‚ùå Operazione annullata', 'output-text');
                    this.exitInteractiveMode();
                    return;
                }

                const socialLinks = {
                    '1': { name: 'GitHub', url: 'https://github.com/awesomecit', icon: 'üíª' },
                    '2': { name: 'LinkedIn', url: 'https://www.linkedin.com/in/antonio-cittadino-9362b179', icon: 'üíº' },
                    '3': { name: 'Email', url: 'mailto:awesome.cit.dev@gmail.com', icon: 'üìß' }
                };

                if (this.interactiveStep === 0) {
                    // Prima scelta: seleziona il profilo
                    if (socialLinks[choice]) {
                        this.interactiveData.selectedProfile = socialLinks[choice];
                        this.addOutputLine('');
                        this.addOutputLine(`${socialLinks[choice].icon} Hai selezionato: ${socialLinks[choice].name}`, 'output-text');
                        this.addOutputLine(`üîó URL: ${socialLinks[choice].url}`, 'output-text');
                        this.addOutputLine('');
                        this.addOutputLine('Confermi apertura in nuova tab? (y/n):', 'output-text');
                        this.interactiveStep = 1;
                    } else {
                        this.addOutputLine('‚ùå Scelta non valida. Digita 1, 2 o 3:', 'output-text');
                    }
                } else if (this.interactiveStep === 1) {
                    // Seconda scelta: conferma apertura
                    if (choice.toLowerCase() === 'y' || choice.toLowerCase() === 'yes') {
                        this.addOutputLine('');
                        this.addOutputLine(`‚úÖ Apertura ${this.interactiveData.selectedProfile.name} in corso...`, 'output-text');
                        
                        // Apri in nuova tab
                        window.open(this.interactiveData.selectedProfile.url, '_blank');
                        
                        this.addOutputLine(`üöÄ Profilo aperto in una nuova tab!`, 'output-text');
                        this.exitInteractiveMode();
                    } else if (choice.toLowerCase() === 'n' || choice.toLowerCase() === 'no') {
                        this.addOutputLine('‚ùå Operazione annullata', 'output-text');
                        this.exitInteractiveMode();
                    } else {
                        this.addOutputLine('‚ùå Risposta non valida. Digita y o n:', 'output-text');
                    }
                }
            }

            // Email Mode - Interactive email composer
            startEmailMode() {
                this.addOutputLine('', 'help-header', 'üìß INVIA MESSAGGIO');
                this.addOutputLine('');
                this.addOutputLine('Compila i seguenti campi per inviare un messaggio:', 'output-text');
                this.addOutputLine('(Digita "cancel" in qualsiasi momento per annullare)', 'help-description');
                this.addOutputLine('');
                this.addOutputLine('üìù Inserisci il tuo nome:', 'output-text');
                
                this.interactiveMode = 'email';
                this.interactiveStep = 0;
                this.interactiveData = {};
            }

            handleEmailModeInput(input) {
                const value = input.trim();
                
                if (value.toLowerCase() === 'cancel') {
                    this.addOutputLine('‚ùå Operazione annullata', 'output-text');
                    this.exitInteractiveMode();
                    return;
                }

                switch(this.interactiveStep) {
                    case 0: // Nome mittente
                        if (value) {
                            this.interactiveData.senderName = value;
                            this.addOutputLine(`‚úÖ Nome: ${value}`, 'output-text');
                            this.addOutputLine('');
                            this.addOutputLine('üìß Inserisci la tua email:', 'output-text');
                            this.interactiveStep = 1;
                        } else {
                            this.addOutputLine('‚ùå Il nome non pu√≤ essere vuoto:', 'output-text');
                        }
                        break;

                    case 1: // Email mittente
                        if (value && value.includes('@')) {
                            this.interactiveData.senderEmail = value;
                            this.addOutputLine(`‚úÖ Email: ${value}`, 'output-text');
                            this.addOutputLine('');
                            this.addOutputLine('üìã Inserisci l\'oggetto del messaggio:', 'output-text');
                            this.interactiveStep = 2;
                        } else {
                            this.addOutputLine('‚ùå Inserisci un indirizzo email valido:', 'output-text');
                        }
                        break;

                    case 2: // Oggetto
                        if (value) {
                            this.interactiveData.subject = value;
                            this.addOutputLine(`‚úÖ Oggetto: ${value}`, 'output-text');
                            this.addOutputLine('');
                            this.addOutputLine('üí¨ Inserisci il messaggio (premi invio per terminare):', 'output-text');
                            this.interactiveStep = 3;
                        } else {
                            this.addOutputLine('‚ùå L\'oggetto non pu√≤ essere vuoto:', 'output-text');
                        }
                        break;

                    case 3: // Messaggio
                        if (value) {
                            this.interactiveData.message = value;
                            this.addOutputLine('');
                            this.addOutputLine('üìã Riepilogo:', 'help-header');
                            this.addOutputLine(`üë§ Da: ${this.interactiveData.senderName} (${this.interactiveData.senderEmail})`, 'output-text');
                            this.addOutputLine(`üìß A: awesome.cit.dev@gmail.com`, 'output-text');
                            this.addOutputLine(`üìå Oggetto: ${this.interactiveData.subject}`, 'output-text');
                            this.addOutputLine(`üí¨ Messaggio: ${this.interactiveData.message.substring(0, 50)}${this.interactiveData.message.length > 50 ? '...' : ''}`, 'output-text');
                            this.addOutputLine('');
                            this.addOutputLine('Aprire il client email? (y/n):', 'output-text');
                            this.interactiveStep = 4;
                        } else {
                            this.addOutputLine('‚ùå Il messaggio non pu√≤ essere vuoto:', 'output-text');
                        }
                        break;

                    case 4: // Conferma
                        if (value.toLowerCase() === 'y' || value.toLowerCase() === 'yes') {
                            this.addOutputLine('');
                            this.addOutputLine('‚úÖ Apertura client email...', 'output-text');
                            
                            // Costruisci il mailto link
                            const body = `Mittente: ${this.interactiveData.senderName}%0D%0AEmail: ${this.interactiveData.senderEmail}%0D%0A%0D%0A${encodeURIComponent(this.interactiveData.message)}`;
                            const subject = encodeURIComponent(this.interactiveData.subject);
                            const mailtoLink = `mailto:awesome.cit.dev@gmail.com?subject=${subject}&body=${body}`;
                            
                            // Apri il client email
                            window.location.href = mailtoLink;
                            
                            this.addOutputLine('üöÄ Client email aperto!', 'output-text');
                            this.addOutputLine('üì¨ Completa e invia il messaggio dal tuo client email.', 'output-text');
                            this.exitInteractiveMode();
                        } else if (value.toLowerCase() === 'n' || value.toLowerCase() === 'no') {
                            this.addOutputLine('‚ùå Operazione annullata', 'output-text');
                            this.exitInteractiveMode();
                        } else {
                            this.addOutputLine('‚ùå Risposta non valida. Digita y o n:', 'output-text');
                        }
                        break;
                }
            }

            // Exit Interactive Mode
            exitInteractiveMode() {
                this.interactiveMode = null;
                this.interactiveStep = 0;
                this.interactiveData = {};
            }

            // Clear Terminal Implementation
            clearTerminal() {
                const terminalContent = document.getElementById('terminalContent');
                const currentLine = document.getElementById('currentLine');
                
                // Remove all lines except the current input line
                while (terminalContent.firstChild && terminalContent.firstChild !== currentLine) {
                    terminalContent.removeChild(terminalContent.firstChild);
                }
                
                // Terminal completamente pulito - nessun messaggio aggiuntivo
            }

            // General Help Command
            showHelp() {
                this.addOutputLine('', 'help-header', 'üìã COMANDI DISPONIBILI');
                this.addOutputLine('');
                this.addOutputLine('Comandi principali:', 'help-header');
                this.addCommandHelp('help', 'Mostra questo messaggio di aiuto');
                this.addCommandHelp('cit --help', 'Mostra tutti i comandi del CV');
                this.addCommandHelp('cit about', 'Profilo professionale e informazioni personali');
                this.addCommandHelp('cit skills', 'Competenze tecniche e metodologie');
                this.addCommandHelp('cit experience', 'Esperienza lavorativa dettagliata');
                this.addCommandHelp('cit education', 'Formazione e certificazioni');
                this.addCommandHelp('cit projects', 'Portfolio progetti personali');
                this.addCommandHelp('cit contact', 'Informazioni di contatto');
                this.addCommandHelp('cit download', 'Scarica il CV in formato PDF');
                this.addOutputLine('');
                this.addOutputLine('Comandi interattivi:', 'help-header');
                this.addCommandHelp('social', 'Apri profili social (GitHub, LinkedIn) in modo interattivo');
                this.addCommandHelp('sendmail', 'Compila e invia un messaggio via email');
                this.addOutputLine('');
                this.addOutputLine('Altri comandi:', 'help-header');
                this.addCommandHelp('clear', 'Pulisce il terminale');
                this.addOutputLine('');
                this.addOutputLine('üí° Suggerimento: Inizia con "cit about" per una panoramica generale', 'help-description');
            }

            // Add Command Help Line
            addCommandHelp(command, description) {
                const line = document.createElement('div');
                line.className = 'terminal-line';

                const commandSpan = document.createElement('span');
                commandSpan.className = 'help-command';
                commandSpan.textContent = command;

                const descSpan = document.createElement('span');
                descSpan.className = 'help-description';
                descSpan.textContent = ` - ${description}`;

                line.appendChild(commandSpan);
                line.appendChild(descSpan);

                this.insertBeforeCurrentLine(line);
            }

            // Add Output Line to Terminal
            addOutputLine(text, className = 'output-text', content = null) {
                const line = document.createElement('div');
                line.className = 'terminal-line';

                const span = document.createElement('span');
                span.className = className;
                span.textContent = content || text;

                line.appendChild(span);
                this.insertBeforeCurrentLine(line);
            }

            // Add Output Line with Clickable Link (CTRL+Click)
            addOutputLineWithLink(text, url, className = 'output-text') {
                const line = document.createElement('div');
                line.className = 'terminal-line';

                const span = document.createElement('span');
                span.className = className;
                
                // Split text to find URL part
                const urlStart = text.indexOf(url);
                if (urlStart !== -1) {
                    // Testo prima del link
                    const beforeLink = text.substring(0, urlStart);
                    const afterLink = text.substring(urlStart + url.length);
                    
                    // Aggiungi testo prima del link
                    if (beforeLink) {
                        span.appendChild(document.createTextNode(beforeLink));
                    }
                    
                    // Crea elemento link cliccabile
                    const linkSpan = document.createElement('span');
                    linkSpan.className = 'clickable-link';
                    linkSpan.textContent = url;
                    linkSpan.setAttribute('data-url', url.startsWith('http') ? url : `https://${url}`);
                    linkSpan.title = 'CTRL+Click per aprire';
                    
                    // Event listener per CTRL+Click (desktop) o tap (mobile)
                    linkSpan.addEventListener('click', (e) => {
                        // Mobile: direct tap opens link
                        // Desktop: CTRL+Click opens link
                        const isMobile = window.innerWidth <= 768;
                        const shouldOpen = isMobile || e.ctrlKey || e.metaKey;
                        
                        if (shouldOpen) {
                            e.preventDefault();
                            e.stopPropagation();
                            const fullUrl = linkSpan.getAttribute('data-url');
                            window.open(fullUrl, '_blank', 'noopener,noreferrer');
                            console.log('üîó Link aperto:', fullUrl);
                        }
                    });

                    // Touch event for better mobile experience
                    linkSpan.addEventListener('touchend', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        const fullUrl = linkSpan.getAttribute('data-url');
                        window.open(fullUrl, '_blank', 'noopener,noreferrer');
                        console.log('üì± Link aperto (touch):', fullUrl);
                    });
                    
                    span.appendChild(linkSpan);
                    
                    // Aggiungi testo dopo il link
                    if (afterLink) {
                        span.appendChild(document.createTextNode(afterLink));
                    }
                } else {
                    // Se non trova l'URL, aggiungi solo il testo
                    span.textContent = text;
                }

                line.appendChild(span);
                this.insertBeforeCurrentLine(line);
            }

            // Add Output Line with Clickable Email Link
            addOutputLineWithEmailLink(text, emailOrWord, className = 'output-text') {
                const line = document.createElement('div');
                line.className = 'terminal-line';

                const span = document.createElement('span');
                span.className = className;
                
                // Trova la posizione della parola da rendere cliccabile
                const wordStart = text.indexOf(emailOrWord);
                if (wordStart !== -1) {
                    // Testo prima della parola cliccabile
                    const beforeWord = text.substring(0, wordStart);
                    const afterWord = text.substring(wordStart + emailOrWord.length);
                    
                    // Aggiungi testo prima
                    if (beforeWord) {
                        span.appendChild(document.createTextNode(beforeWord));
                    }
                    
                    // Crea elemento cliccabile per email
                    const emailSpan = document.createElement('span');
                    emailSpan.className = 'clickable-link';
                    emailSpan.textContent = emailOrWord;
                    emailSpan.title = 'Click per aprire client email';
                    
                    // Event listener per click diretto (senza CTRL) e touch
                    const openEmail = (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        // Se √® un indirizzo email completo, usalo, altrimenti usa quello di default
                        const emailAddress = emailOrWord.includes('@') 
                            ? emailOrWord 
                            : 'awesome.cit.dev@gmail.com';
                        
                        const mailtoLink = `mailto:${emailAddress}`;
                        window.location.href = mailtoLink;
                        console.log('üìß Client email aperto per:', emailAddress);
                    };

                    emailSpan.addEventListener('click', openEmail);
                    emailSpan.addEventListener('touchend', openEmail);
                    
                    span.appendChild(emailSpan);
                    
                    // Aggiungi testo dopo
                    if (afterWord) {
                        span.appendChild(document.createTextNode(afterWord));
                    }
                } else {
                    // Se non trova la parola, aggiungi solo il testo
                    span.textContent = text;
                }

                line.appendChild(span);
                this.insertBeforeCurrentLine(line);
            }

            // Insert Line Before Current Input Line
            insertBeforeCurrentLine(element) {
                const currentLine = document.getElementById('currentLine');
                currentLine.parentNode.insertBefore(element, currentLine);
                this.scrollToBottom();
            }

            // Scroll Terminal to Bottom - optimized for fullscreen
            scrollToBottom() {
                const terminal = document.querySelector('.terminal-content');
                // Smooth scroll per better UX su fullscreen
                terminal.scrollTo({
                    top: terminal.scrollHeight,
                    behavior: 'smooth'
                });
            }

            // Command Processing
            processCommand(input) {
                console.log('üîç DEBUG - Input ricevuto:', `"${input}"`);
                console.log('üîç DEBUG - Modalit√† interattiva:', this.interactiveMode);
                
                // Se siamo in modalit√† interattiva, gestisci l'input diversamente
                if (this.interactiveMode) {
                    this.addCommandToHistory(input);
                    
                    // Routing per le diverse modalit√† interattive
                    switch(this.interactiveMode) {
                        case 'social':
                            this.handleSocialModeInput(input);
                            break;
                        case 'email':
                            this.handleEmailModeInput(input);
                            break;
                    }
                    
                    this.resetInput();
                    return;
                }
                
                // Normale processing dei comandi
                console.log('üîç DEBUG - Input trimmed:', `"${input.trim()}"`);
                
                // Add command to history
                this.addCommandToHistory(input);
                
                // Aggiungi comando alla history per navigazione
                if (input.trim()) {
                    this.commandHistory.push(input.trim());
                    this.historyIndex = this.commandHistory.length;
                }

                // Parse command
                const parts = input.trim().split(' ');
                const command = parts[0].toLowerCase();
                const args = parts.slice(1);
                
                console.log('üîç DEBUG - Comando parsed:', command);
                console.log('üîç DEBUG - Args parsed:', args);
                console.log('üîç DEBUG - Comandi disponibili:', Array.from(this.commands.keys()));
                console.log('üîç DEBUG - Comando trovato?', this.commands.has(command));

                // Execute command
                if (this.commands.has(command)) {
                    console.log('‚úÖ Eseguendo comando:', command);
                    this.commands.get(command).execute(args);
                } else {
                    console.log('‚ùå Comando non trovato:', command);
                    this.addOutputLine(`Comando non trovato: ${command}`);
                    this.addOutputLine('Digita "help" per vedere i comandi disponibili');
                }

                // Reset input
                this.resetInput();
            }

            // Add Command to History Display
            addCommandToHistory(input) {
                const line = document.createElement('div');
                line.className = 'terminal-line';

                const prompt = document.createElement('span');
                prompt.className = 'prompt';
                prompt.textContent = 'cittadino@ntonio:~$ ';

                const command = document.createElement('span');
                command.className = 'command';
                command.textContent = input;

                line.appendChild(prompt);
                line.appendChild(command);

                this.insertBeforeCurrentLine(line);
            }

            // Reset Input State
            resetInput() {
                this.currentInput = '';
                document.getElementById('userInput').textContent = '';
                const mobileInput = document.getElementById('mobileInput');
                if (mobileInput) {
                    mobileInput.value = '';
                }
                this.isWaitingForInput = true;
            }

            // Enable Input Handling
            enableInput() {
                this.isWaitingForInput = true;
                document.querySelector('.terminal-content').focus();
            }

            // Event Binding
            bindEvents() {
                const terminal = document.querySelector('.terminal-content');
                const mobileInput = document.getElementById('mobileInput');
                terminal.setAttribute('tabindex', '0');

                // Desktop: keyboard handling on terminal
                terminal.addEventListener('keydown', (e) => this.handleKeyPress(e));
                terminal.addEventListener('click', () => {
                    // On mobile, focus the mobile input; on desktop, focus terminal
                    if (window.innerWidth <= 768) {
                        mobileInput.focus();
                    } else {
                        terminal.focus();
                    }
                });
                
                // Mobile: handle input from mobile input field
                mobileInput.addEventListener('input', (e) => {
                    if (!this.isWaitingForInput || this.isTyping) return;
                    
                    this.currentInput = e.target.value;
                    const userInputElement = document.getElementById('userInput');
                    userInputElement.innerHTML = this.currentInput.replace(/ /g, '&nbsp;');
                });

                mobileInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        if (this.currentInput.trim()) {
                            this.processCommand(this.currentInput);
                            e.target.value = '';
                        }
                    }
                });

                // Gestione paste (Ctrl+V) - Desktop
                terminal.addEventListener('paste', (e) => {
                    if (!this.isWaitingForInput || this.isTyping) return;
                    
                    e.preventDefault();
                    const pastedText = e.clipboardData.getData('text');
                    this.currentInput += pastedText;
                    const userInputElement = document.getElementById('userInput');
                    userInputElement.innerHTML = this.currentInput.replace(/ /g, '&nbsp;');
                    console.log('üìã DEBUG - Testo incollato:', pastedText);
                });

                // Gestione paste - Mobile input
                mobileInput.addEventListener('paste', (e) => {
                    if (!this.isWaitingForInput || this.isTyping) return;
                    
                    // Let the mobile input handle paste naturally
                    setTimeout(() => {
                        this.currentInput = mobileInput.value;
                        const userInputElement = document.getElementById('userInput');
                        userInputElement.innerHTML = this.currentInput.replace(/ /g, '&nbsp;');
                        console.log('üìã DEBUG - Testo incollato (mobile):', this.currentInput);
                    }, 10);
                });

                // Enable copy from terminal content
                this.enableCopyFunctionality();

                // Auto-focus mobile input on load for mobile devices
                if (window.innerWidth <= 768) {
                    setTimeout(() => mobileInput.focus(), 1000);
                }
            }

            // Enable copy functionality for terminal content
            enableCopyFunctionality() {
                const terminal = document.querySelector('.terminal-content');
                
                // Add copy button on selection (mobile-friendly)
                document.addEventListener('selectionchange', () => {
                    const selection = window.getSelection();
                    if (selection.toString().length > 0) {
                        console.log('üìã Testo selezionato:', selection.toString().substring(0, 50) + '...');
                    }
                });

                // Long press for context menu on mobile
                let longPressTimer;
                terminal.addEventListener('touchstart', (e) => {
                    longPressTimer = setTimeout(() => {
                        // Enable native context menu for copy
                        console.log('üì± Long press detected - context menu available');
                    }, 500);
                });

                terminal.addEventListener('touchend', () => {
                    clearTimeout(longPressTimer);
                });

                terminal.addEventListener('touchmove', () => {
                    clearTimeout(longPressTimer);
                });
            }

            // Keyboard Event Handler
            handleKeyPress(event) {
                // Permetti F12, F5, e altri tasti funzione del browser
                if (event.key.startsWith('F') || event.metaKey) {
                    return; // Non bloccare i tasti funzione
                }

                // Permetti Ctrl+C, Ctrl+V, Ctrl+A, Ctrl+X per copy/paste/select all
                if (event.ctrlKey && ['c', 'v', 'a', 'x'].includes(event.key.toLowerCase())) {
                    return; // Permetti operazioni di clipboard
                }

                if (!this.isWaitingForInput || this.isTyping) return;

                const userInputElement = document.getElementById('userInput');

                switch (event.key) {
                    case 'Enter':
                        if (this.currentInput.trim()) {
                            this.processCommand(this.currentInput);
                        } else {
                            this.resetInput();
                        }
                        event.preventDefault();
                        break;

                    case 'Backspace':
                        this.currentInput = this.currentInput.slice(0, -1);
                        userInputElement.innerHTML = this.currentInput.replace(/ /g, '&nbsp;');
                        console.log('üîç DEBUG - Backspace | Input corrente:', `"${this.currentInput}"`);
                        event.preventDefault();
                        break;

                    case 'ArrowUp':
                        // Naviga all'indietro nella history
                        if (this.commandHistory.length > 0 && this.historyIndex > 0) {
                            this.historyIndex--;
                            this.currentInput = this.commandHistory[this.historyIndex];
                            userInputElement.innerHTML = this.currentInput.replace(/ /g, '&nbsp;');
                            console.log('üîç DEBUG - ArrowUp | History Index:', this.historyIndex, '| Comando:', this.currentInput);
                        }
                        event.preventDefault();
                        break;

                    case 'ArrowDown':
                        // Naviga in avanti nella history
                        if (this.historyIndex < this.commandHistory.length - 1) {
                            this.historyIndex++;
                            this.currentInput = this.commandHistory[this.historyIndex];
                            userInputElement.innerHTML = this.currentInput.replace(/ /g, '&nbsp;');
                            console.log('üîç DEBUG - ArrowDown | History Index:', this.historyIndex, '| Comando:', this.currentInput);
                        } else if (this.historyIndex === this.commandHistory.length - 1) {
                            // Ritorna all'input vuoto se siamo all'ultimo comando
                            this.historyIndex = this.commandHistory.length;
                            this.currentInput = '';
                            userInputElement.textContent = '';
                            console.log('üîç DEBUG - ArrowDown | Ritorno a input vuoto');
                        }
                        event.preventDefault();
                        break;

                    case 'Tab':
                        // Future: Autocomplete implementation
                        event.preventDefault();
                        break;

                    default:
                        if (event.key.length === 1 && !event.ctrlKey && !event.altKey) {
                            this.currentInput += event.key;
                            // Usa innerHTML con &nbsp; per gli spazi per preservarli visivamente
                            userInputElement.textContent = this.currentInput;
                            // Aggiungi uno zero-width space dopo per far vedere meglio il cursore
                            if (event.key === ' ') {
                                userInputElement.innerHTML = this.currentInput.replace(/ /g, '&nbsp;');
                            }
                            // Reset history index quando l'utente inizia a digitare
                            this.historyIndex = this.commandHistory.length;
                            console.log('üîç DEBUG - Tasto premuto:', event.key, '| Input corrente:', `"${this.currentInput}"`);
                            event.preventDefault(); // Previeni solo per caratteri normali
                        }
                        break;
                }
            }
        }

        // Initialization
        document.addEventListener('DOMContentLoaded', function () {
            const terminal = new TerminalCommandSystem();

            // Start welcome sequence
            terminal.showWelcomeMessage();

            // Focus terminal for immediate interaction
            setTimeout(() => {
                document.querySelector('.terminal-content').focus();
            }, 100);

            // Permetti context menu per copy/paste
            // Commentiamo il blocco per permettere interazioni native del browser
            // document.addEventListener('contextmenu', (e) => {
            //     e.preventDefault();
            // });

            // Handle window resize for fullscreen optimization
            window.addEventListener('resize', () => {
                // Force recalculation of terminal height on mobile orientation change
                const terminal = document.querySelector('.terminal-content');
                terminal.style.height = '0';
                setTimeout(() => {
                    terminal.style.height = '';
                }, 10);
            });

            console.log('Matrix Terminal Fullscreen with CV Navigation initialized');
        });
    </script>
</body>

</html>